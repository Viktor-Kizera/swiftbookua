---
title: –ú–∞–∫—Ä–æ—Å–∏
layout: default
parent: –ü–æ—Å—ñ–±–Ω–∏–∫ –∑ –º–æ–≤–∏
nav_order: 19
has_children: false
has_toc: false
---

# –ú–∞–∫—Ä–æ—Å–∏

‚ö†Ô∏èüõ†Ô∏è –£–≤–∞–≥–∞! –¶–µ–π –ø—ñ–¥—Ä–æ–∑–¥—ñ–ª –Ω–∞—Ä–∞–∑—ñ –ø–µ—Ä–µ–∫–ª–∞–¥–∞—î—Ç—å—Å—è, —Ç–æ–º—É –Ω–∞—Ä–∞–∑—ñ –ø—Ä–æ–ø–æ–Ω—É—î–º–æ –≤–∞—à—ñ–π —É–≤–∞–∑—ñ –Ω–µ–ø–æ–≤—Ç–æ—Ä–Ω–∏–π –æ—Ä–∏–≥—ñ–Ω–∞–ª üõ†Ô∏è‚ö†Ô∏è

–ú–∞–∫—Ä–æ—Å–∏ –≥–µ–Ω–µ—Ä—É—é—Ç—å –∫–æ–¥ –ø—ñ–¥ —á–∞—Å –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó.

–ú–∞–∫—Ä–æ—Å–∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º—É—é—Ç—å –≤–∞—à –≤–∏—Ö—ñ–¥–Ω–∏–π –∫–æ–¥ –ø—Ä–∏ –π–æ–≥–æ –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó, —â–æ –¥–æ–∑–≤–æ–ª—è—î —É–Ω–∏–∫–Ω—É—Ç–∏ –Ω–∞–ø–∏—Å–∞–Ω–Ω—è –ø–æ–≤—Ç–æ—Ä—é–≤–∞–Ω–æ–≥–æ –∫–æ–¥—É –≤—Ä—É—á–Ω—É. –ü—ñ–¥ —á–∞—Å –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó, Swift —Ä–æ–∑–≥–æ—Ä—Ç–∞—î –∫–æ–∂–µ–Ω –º–∞–∫—Ä–æ—Å —É –≤–∞—à–æ–º—É –∫–æ–¥—ñ –ø–µ—Ä–µ–¥ –∑–≤–∏—á–∞–π–Ω–æ—é –∫–æ–º–ø—ñ–ª—è—Ü—ñ—î—é –≤–∞—à–æ–≥–æ –∫–æ–¥—É.

![–î—ñ–∞–≥—Ä–∞–º–∞, —â–æ –∑–æ–±—Ä–∞–∂–∞—î —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –º–∞–∫—Ä–æ—Å—É. –ó–ª—ñ–≤–∞ ‚Äì —Å—Ç–∏–ª—ñ–∑–æ–≤–∞–Ω–∞ —Ä–µ–ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü—ñ—è –∫–æ–¥—É Swift. –°–ø—Ä–∞–≤–∞ ‚Äì —Ü–µ–π –∂–µ –∫–æ–¥ –∑ –∫—ñ–ª—å–∫–æ–º–∞ —Ä—è–¥–∫–∞–º–∏, —è–∫—ñ –¥–æ–¥–∞–ª–∏—Å—å –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –º–∞–∫—Ä–æ—Å—É.](../../assets/macro-expansion@2x.png)

–†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –º–∞–∫—Ä–æ—Å—É —î –∑–∞–≤–∂–¥–∏ –∞–¥–∏—Ç–∏–≤–Ω–æ—é –æ–ø–µ—Ä–∞—Ü—ñ—î—é: –º–∞–∫—Ä–æ—Å–∏ –¥–æ–¥–∞—é—Ç—å –Ω–æ–≤–∏–π –∫–æ–¥, –∞–ª–µ –≤–æ–Ω–∏ –Ω—ñ–∫–æ–ª–∏ –Ω–µ –≤–∏–¥–∞–ª—è—é—Ç—å —ñ –Ω–µ –∑–º—ñ–Ω—é—é—Ç—å –≤–∂–µ –Ω–∞—è–≤–Ω–∏–π –∫–æ–¥.

–Ø–∫ –≤—Ö—ñ–¥–Ω—ñ –¥–∞–Ω—ñ –º–∞–∫—Ä–æ—Å—É, —Ç–∞–∫ —ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –º–∞–∫—Ä–æ—Å—É –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å—Å—è, —â–æ–± –≥–∞—Ä–∞–Ω—Ç—É–≤–∞—Ç–∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–Ω—É –ø—Ä–∞–≤–∏–ª—å–Ω—ñ—Å—Ç—å —Ü—å–æ–≥–æ –∫–æ–¥—É –Ω–∞ Swift. –ê–Ω–∞–ª–æ–≥—ñ—á–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è –∫–æ—Ä–µ–∫—Ç–Ω—ñ—Å—Ç—å —Ç–∏–ø—ñ–≤ –∑–Ω–∞—á–µ–Ω—å, —â–æ –≤–∏ –ø–µ—Ä–µ–¥–∞—î—Ç–µ –¥–æ –º–∞–∫—Ä–æ—Å—É, —Ç–∞ –∑–Ω–∞—á–µ–Ω–Ω—è —É –∫–æ–¥—ñ, –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–æ–º—É –º–∞–∫—Ä–æ—Å–æ–º. –ù–∞ –¥–æ–¥–∞—á—É, —è–∫—â–æ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –º–∞–∫—Ä–æ—Å—É –ø—ñ–¥ —á–∞—Å —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –º–∞–∫—Ä–æ—Å—É —Å—Ç–∏–∫–∞—î—Ç—å—Å—è –∑ –ø–æ–º–∏–ª–∫–æ—é, –∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä –≤–≤–∞–∂–∞—î —Ü–µ –ø–æ–º–∏–ª–∫–æ—é –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó. –¶—ñ –≥–∞—Ä–∞–Ω—Ç—ñ—ó –¥–æ–∑–≤–æ–ª—è—é—Ç—å –ª–µ–≥—à–µ —Ä–æ–∑–º—ñ—Ä–∫–æ–≤—É–≤–∞—Ç–∏ –ø—Ä–æ –∫–æ–¥, —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –º–∞–∫—Ä–æ—Å–∏, –∞ —Ç–∞–∫–æ–∂ –¥–æ–∑–≤–æ–ª—è—é—Ç—å –ª–µ–≥—à–µ —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫—É–≤–∞—Ç–∏ –ø—Ä–æ–±–ª–µ–º–∏ –Ω–∞ –∫—à—Ç–∞–ª—Ç –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –º–∞–∫—Ä–æ—Å—É, —á–∏ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –º–∞–∫—Ä–æ—Å—É, —â–æ –º—ñ—Å—Ç–∏—Ç—å –±–∞–≥. 

–£ Swift —î –¥–≤–∞ –≤–∏–¥–∏ –º–∞–∫—Ä–æ—Å—ñ–≤:
 - *–û–∫—Ä–µ–º–æ —Å—Ç–æ—è—á–∏–π –º–∞–∫—Ä–æ—Å* –∑'—è–≤–ª—è—î—Ç—å—Å—è –≤ –∫–æ–¥—ñ —Å–∞–º–æ—Å—Ç—ñ–π–Ω–æ, –±–µ–∑ –ø—Ä–∏–≤'—è–∑–∫–∏ –¥–æ –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è.
 - *–ü—Ä–∏–≤'—è–∑–∞–Ω–∏–π –º–∞–∫—Ä–æ—Å* –∑–º—ñ–Ω—é—î –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è, –¥–æ —è–∫–æ–≥–æ –≤—ñ–Ω –ø—Ä–∏–≤'—è–∑–∞–Ω–∏–π.

–ü—Ä–∏–≤'—è–∑–∞–Ω—ñ —Ç–∞ –æ–∫—Ä–µ–º–æ —Å—Ç–æ—è—á—ñ –º–∞–∫—Ä–æ—Å–∏ –≤–∏–∫–ª–∏–∫–∞—é—Ç—å—Å—è –¥–µ—â–æ –ø–æ-—Ä—ñ–∑–Ω–æ–º—É, –∞–ª–µ –æ–±–∏–¥–≤–∞ —Ü—ñ –≤–∏–¥–∏ –º–∞–∫—Ä–æ—Å—ñ–≤ —Å–ª—ñ–¥—É—é—Ç—å –æ–¥–Ω—ñ–π —ñ —Ç—ñ–π –∂–µ –º–æ–¥–µ–ª—ñ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –º–∞–∫—Ä–æ—Å—ñ–≤, —ñ —ó—Ö —Ä–µ–∞–ª—ñ–∑–æ–≤—É—é—Ç—å –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –æ–¥–Ω–æ–≥–æ —ñ —Ç–æ–≥–æ –∂ –ø—ñ–¥—Ö–æ–¥—É. –ù–∞—Å—Ç—É–ø–Ω—ñ —Ä–æ–∑–¥—ñ–ª–∏ –¥–µ—Ç–∞–ª—å–Ω–æ –æ–ø–∏—Å—É—é—Ç—å –∫–æ–∂–µ–Ω –≤–∏–¥ –º–∞–∫—Ä–æ—Å—ñ–≤.

## –û–∫—Ä–µ–º–æ —Å—Ç–æ—è—á—ñ –º–∞–∫—Ä–æ—Å–∏

–©–æ–± –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –æ–∫—Ä–µ–º–æ —Å—Ç–æ—è—á–∏–π –º–∞–∫—Ä–æ—Å, —Å–ª—ñ–¥ –Ω–∞–ø–∏—Å–∞—Ç–∏ –∑–Ω–∞–∫ —Ä–µ—à—ñ—Ç–∫–∏ (`#`) –ø–µ—Ä–µ–¥ –π–æ–≥–æ –Ω–∞–∑–≤–æ—é, —ñ —Å–ª—ñ–¥ —Ç–∞–∫–æ–∂ –≤–∫–∞–∑–∞—Ç–∏ –≤—Å—ñ –π–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∏, —è–∫—â–æ –≤–æ–Ω–∏ —î, —É –¥—É–∂–∫–∞—Ö –ø—ñ—Å–ª—è –π–æ–≥–æ –Ω–∞–∑–≤–∏. –ù–∞–ø—Ä–∏–∫–ª–∞–¥:

```swift
func myFunction() {
    print("–ù–∞—Ä–∞–∑—ñ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è \(#function)")
    #warning("–©–æ—Å—å –Ω–µ —Ç–∞–∫")
}
```

–£ –ø–µ—Ä—à–æ–º—É —Ä—è–¥–∫—É, –∑–∞–ø–∏—Å `#function` –≤–∏–∫–ª–∏–∫–∞—î –º–∞–∫—Ä–æ—Å [`function`][] –∑—ñ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ—ó –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ Swift. –ü—ñ–¥ —á–∞—Å –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó —Ü—å–æ–≥–æ –∫–æ–¥—É, Swift –≤–∏–∫–ª–∏–∫–∞—î —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é —Ü—å–æ–≥–æ –º–∞–∫—Ä–æ—Å—É, –∫–æ—Ç—Ä–∞ –∑–∞–º—ñ–Ω—é—î –≤–∏—Ä–∞–∑ `#function` –Ω–∞–∑–≤–æ—é –ø–æ—Ç–æ—á–Ω–æ—ó —Ñ—É–Ω–∫—Ü—ñ—ó. –Ø–∫—â–æ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ —Ü–µ–π –∫–æ–¥ —Ç–∞ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—é `myFunction()`, –≤–æ–Ω–∞ –Ω–∞–¥—Ä—É–∫—É—î "–ù–∞—Ä–∞–∑—ñ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è myFunction()". –ù–∞ –¥—Ä—É–≥–æ–º—É —Ä—è–¥–∫—É, –≤–∏—Ä–∞–∑ `#warning` –≤–∏–∫–ª–∏–∫–∞—î –º–∞–∫—Ä–æ—Å [`warning(_:)`][] –∑—ñ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ—ó –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ Swift, —â–æ —Å—Ç–≤–æ—Ä—é—î –≤–∞—à–µ –≤–ª–∞—Å–Ω–µ –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è –∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä–∞.

[`function`]: https://developer.apple.com/documentation/swift/function
[`warning(_:)`]: https://developer.apple.com/documentation/swift/warning(_:)

–û–∫—Ä–µ–º–æ —Å—Ç–æ—è—á—ñ –º–∞–∫—Ä–æ—Å–∏ –º–æ–∂—É—Ç—å —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è, —è–∫ —Ä–æ–±–∏—Ç—å –º–∞–∫—Ä–æ—Å `#function`, –∞–±–æ –≤–æ–Ω–∏ –º–æ–∂—É—Ç—å –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –¥—ñ—é –ø—ñ–¥ —á–∞—Å –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó, —è–∫ —Ä–æ–±–∏—Ç—å –º–∞–∫—Ä–æ—Å `#warning`.

## –ü—Ä–∏–≤'—è–∑–∞–Ω—ñ –º–∞–∫—Ä–æ—Å–∏

–©–æ–± –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –ø—Ä–∏–≤'—è–∑–∞–Ω–∏–π –º–∞–∫—Ä–æ—Å, —Å–ª—ñ–¥ –Ω–∞–ø–∏—Å–∞—Ç–∏ –∑–Ω–∞–∫ (`@`) –ø–µ—Ä–µ–¥ –π–æ–≥–æ –Ω–∞–∑–≤–æ—é, —Ç–∞ –≤–∫–∞–∑–∞—Ç–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–∏ –º–∞–∫—Ä–æ—Å–∞, —è–∫—â–æ –≤–æ–Ω–∏ —î, —É –¥—É–∂–∫–∞—Ö –ø—ñ—Å–ª—è –π–æ–≥–æ –Ω–∞–∑–≤–∏. 

–ü—Ä–∏–≤'—è–∑–∞–Ω—ñ –º–∞–∫—Ä–æ—Å–∏ –∑–º—ñ–Ω—é—é—Ç—å –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è, –¥–æ —è–∫–æ–≥–æ –≤–æ–Ω–∏ –ø—Ä–∏–≤'—è–∑–∞–Ω—ñ. –í–æ–Ω–∏ –¥–æ–¥–∞—é—Ç—å –∫–æ–¥ –¥–æ —Ü—å–æ–≥–æ –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è, –Ω–∞ –∫—à—Ç–∞–ª—Ç –¥–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –º–µ—Ç–æ–¥—É –∞–±–æ –¥–æ–¥–∞–≤–∞–Ω–Ω—è –ø—ñ–¥–ø–æ—Ä—è–¥–∫—É–≤–∞–Ω–Ω—è –¥–æ –ø—Ä–æ—Ç–æ–∫–æ–ª—É. 

–ù–∞–ø—Ä–∏–∫–ª–∞–¥, —Ä–æ–∑–≥–ª—è–Ω–µ–º–æ –Ω–∞—Å—Ç—É–ø–Ω–∏–π –∫–æ–¥, —â–æ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –º–∞–∫—Ä–æ—Å—ñ–≤:

```swift
struct SundaeToppings: OptionSet {
    let rawValue: Int
    static let nuts = SundaeToppings(rawValue: 1 << 0)
    static let cherry = SundaeToppings(rawValue: 1 << 1)
    static let fudge = SundaeToppings(rawValue: 1 << 2)
}
```

–£ —Ü—å–æ–º—É –∫–æ–¥—ñ, –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è –∫–æ–∂–Ω–æ—ó –æ–ø—Ü—ñ—ó —ñ–∑ –º–Ω–æ–∂–∏–Ω–∏ –æ–ø—Ü—ñ–π `SundaeToppings` –º—ñ—Å—Ç–∏—Ç—å –≤–∏–∫–ª–∏–∫ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ç–æ—Ä–∞, –∫–æ—Ç—Ä–∏–π —î –ø–æ–≤—Ç–æ—Ä—é–≤–∞–Ω–∏–º –∫–æ–¥–æ–º, –Ω–∞–ø–∏—Å–∞–Ω–∏–º –≤—Ä—É—á–Ω—É. –£ —Ç–∞–∫–æ–º—É –∫–æ–¥—ñ –ª–µ–≥–∫–æ –∑—Ä–æ–±–∏—Ç–∏ –ø–æ–º–∏–ª–∫—É –ø—Ä–∏ –¥–æ–¥–∞–≤–∞–Ω–Ω—ñ –Ω–æ–≤–æ—ó –æ–ø—Ü—ñ—ó, –Ω–∞–±—Ä–∞–≤—à–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–µ —á–∏—Å–ª–æ –Ω–∞–ø—Ä–∏–∫—ñ–Ω—Ü—ñ —Ä—è–¥–∫–∞. 

–û—Å—å –≤–µ—Ä—Å—ñ—è —Ü—å–æ–≥–æ –∫–æ–¥—É, —â–æ –Ω–∞—Ç–æ–º—ñ—Å—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –º–∞–∫—Ä–æ—Å:

```swift
@OptionSet<Int>
struct SundaeToppings {
    private enum Options: Int {
        case nuts
        case cherry
        case fudge
    }
}
```

–¶—è –≤–µ—Ä—Å—ñ—è `SundaeToppings` –≤–∏–∫–ª–∏–∫–∞—î –º–∞–∫—Ä–æ—Å [`@OptionSet`][] –∑—ñ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ—ó –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ Swift. –¶–µ–π –º–∞–∫—Ä–æ—Å –≤–∏—á–∏—Ç—É—î —Å–ø–∏—Å–æ–∫ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—è, –≥–µ–Ω–µ—Ä—É—î —Å–ø–∏—Å–æ–∫ –∫–æ–Ω—Å—Ç–∞–Ω—Ç –¥–ª—è –∫–æ–∂–Ω–æ—ó –æ–ø—Ü—ñ—ó, —Ç–∞ –¥–æ–¥–∞—î –ø—ñ–¥–ø–æ—Ä—è–¥–∫—É–≤–∞–Ω–Ω—è –¥–æ –ø—Ä–æ—Ç–æ–∫–æ–ª—É [`OptionSet`][].

[`@OptionSet`]: https://developer.apple.com/documentation/swift/optionset-swift.macro
[`OptionSet`]: https://developer.apple.com/documentation/swift/optionset-swift.protocol

–î–ª—è –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è, –æ—Å—å —è–∫ –≤–∏–≥–ª—è–¥–∞—î —Ü–µ–π –∫–æ–¥ –ø—ñ—Å–ª—è —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –º–∞–∫—Ä–æ—Å—É `@OptionSet`. –í–∞–º –Ω–µ –¥–æ–≤–µ–¥–µ—Ç—å—Å—è –ø–∏—Å–∞—Ç–∏ —Ç–∞–∫–∏–π –∫–æ–¥, —ñ –≤–∏ –π–æ–≥–æ –ø–æ–±–∞—á–∏—Ç–µ –ª–∏—à–µ —è–∫—â–æ –≤–∏ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–æ –ø–æ–ø—Ä–æ—Å–∏—Ç–µ Swift –ø–æ–∫–∞–∑–∞—Ç–∏ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –º–∞–∫—Ä–æ—Å—É. 

```swift
struct SundaeToppings {
    private enum Options: Int {
        case nuts
        case cherry
        case fudge
    }

    typealias RawValue = Int
    var rawValue: RawValue
    init() { self.rawValue = 0 }
    init(rawValue: RawValue) { self.rawValue = rawValue }
    static let nuts: Self = Self(rawValue: 1 << Options.nuts.rawValue)
    static let cherry: Self = Self(rawValue: 1 << Options.cherry.rawValue)
    static let fudge: Self = Self(rawValue: 1 << Options.fudge.rawValue)
}
extension SundaeToppings: OptionSet { }
```

–í–µ—Å—å –∫–æ–¥ –ø—ñ—Å–ª—è –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—è –∑'—è–≤–ª—è—î—Ç—å—Å—è –∑ –º–∞–∫—Ä–æ—Å—É `@OptionSet`. –í–µ—Ä—Å—ñ—è `SundaeToppings`, —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –º–∞–∫—Ä–æ—Å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –≤—Å—ñ—Ö —Å—Ç–∞—Ç–∏—á–Ω–∏—Ö –∑–º—ñ–Ω–Ω–∏—Ö, —î –ø—Ä–æ—Å—Ç—ñ—à–æ—é –¥–ª—è —á–∏—Ç–∞–Ω–Ω—è —Ç–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∏, –∞–Ω—ñ–∂ –ø–æ–ø–µ—Ä–µ–¥–Ω—è –≤–µ—Ä—Å—ñ—è, –æ–≥–æ–ª–æ—à–µ–Ω–∞ –ø–æ–≤–Ω—ñ—Å—Ç—é –≤—Ä—É—á–Ω—É. 

## –û–≥–æ–ª–æ—à–µ–Ω–Ω—è –º–∞–∫—Ä–æ—Å—ñ–≤

–£ –±—ñ–ª—å—à–æ—Å—Ç—ñ –∫–æ–¥—É Swift, —è–∫—â–æ –≤–∞–º —Ç—Ä–µ–±–∞ –æ–≥–æ–ª–æ—Å–∏—Ç–∏ —Å–∏–º–≤–æ–ª, —Ç–∞–∫–∏–π —è–∫ —Ñ—É–Ω–∫—Ü—ñ—é —á–∏ —Ç–∏–ø, –≤–∞–º –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–µ –æ–∫—Ä–µ–º–µ –π–æ–≥–æ –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è. –û–¥–Ω–∞–∫, –¥–ª—è –º–∞–∫—Ä–æ—Å—ñ–≤, –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è —Ç–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è —î —Ä–æ–∑–¥—ñ–ª–µ–Ω–∏–º–∏. –û–≥–æ–ª–æ—à–µ–Ω–Ω—è –º–∞–∫—Ä–æ—Å—É –º—ñ—Å—Ç–∏—Ç—å –π–æ–≥–æ –Ω–∞–∑–≤—É, –ø–∞—Ä–∞–º–µ—Ç—Ä–∏, —â–æ –≤—ñ–Ω –ø—Ä–∏–π–º–∞—î, –º—ñ—Å—Ü–µ, –¥–µ –π–æ–≥–æ –º–æ–∂–Ω–∞ –∑–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏, —Ç–∞ —è–∫–æ–≥–æ –≤–∏–¥—É –∫–æ–¥ –≤—ñ–Ω –≥–µ–Ω–µ—Ä—É—î. –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –º–∞–∫—Ä–æ—Å—É –º—ñ—Å—Ç–∏—Ç—å –∫–æ–¥, —â–æ —Ä–æ–∑–≥–æ—Ä—Ç–∞—î –º–∞–∫—Ä–æ—Å, –≥–µ–Ω–µ—Ä—É—é—á–∏ –∫–æ–¥ –º–æ–≤–æ—é Swift.

–û–≥–æ–ª–æ—à–µ–Ω–Ω—è –º–∞–∫—Ä–æ—Å—É –≤–≤–æ–¥–∏—Ç—å—Å—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –∫–ª—é—á–æ–≤–æ–≥–æ —Å–ª–æ–≤–∞ `macro`. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –æ—Å—å —á–∞—Å—Ç–∏–Ω–∞ –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è –º–∞–∫—Ä–æ—Å—É `@OptionSet`, —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–≤—Å—è —É –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–º—É –ø—Ä–∏–∫–ª–∞–¥—ñ: 

```swift
public macro OptionSet<RawType>() =
        #externalMacro(module: "SwiftMacros", type: "OptionSetMacro")
```

–ü–µ—Ä—à–∏–π —Ä—è–¥–æ–∫ –≤–∏–∑–Ω–∞—á–∞—î –Ω–∞–∑–≤—É –º–∞–∫—Ä–æ—Å—É —Ç–∞ –π–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∏: –Ω–∞–∑–≤–æ—é —î `OptionSet`, —ñ –≤—ñ–Ω –Ω–µ –ø—Ä–∏–π–º–∞—î –∂–æ–¥–Ω–∏—Ö –∞—Ä–≥—É–º–µ–Ω—Ç—ñ–≤. –î—Ä—É–≥–∏–π —Ä—è–¥–æ–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –º–∞–∫—Ä–æ—Å [`externalMacro(module:type:)`][] –∑—ñ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ—ó –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ Swift, —ñ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –π–æ–≥–æ –≤–∫–∞–∑—É—î Swift, –¥–µ –±—É–¥–µ –∑–Ω–∞—Ö–æ–¥–∏—Ç–∏—Å—å —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è —Ü—å–æ–≥–æ –º–∞–∫—Ä–æ—Å—É. –£ —Ü—å–æ–º—É –≤–∏–ø–∞–¥–∫—É, –º–æ–¥—É–ª—å `SwiftMacros` –º—ñ—Å—Ç–∏—Ç—å —Ç–∏–ø –Ω–∞ —ñ–º'—è `OptionSetMacro`, —â–æ —Ä–µ–∞–ª—ñ–∑–æ–≤—É—î –º–∞–∫—Ä–æ—Å `@OptionSet`.

[`externalMacro(module:type:)`]: https://developer.apple.com/documentation/swift/externalmacro(module:type:)

–û—Å–∫—ñ–ª—å–∫–∏ –º–∞–∫—Ä–æ—Å `OptionSet` —î –ø—Ä–∏–≤'—è–∑–∞–Ω–∏–º, –π–æ–≥–æ –Ω–∞–∑–≤–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î [–í–µ—Ä—Ö–Ω—ñ–π–í–µ—Ä–±–ª—é–¥—è—á–∏–π–†–µ–≥—ñ—Å—Ç—Ä][], —Ç–∞–∫ —Å–∞–º–æ —è–∫ –Ω–∞–∑–≤–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä —Ç–∞ –∫–ª–∞—Å—ñ–≤. –û–∫—Ä–µ–º–æ —Å—Ç–æ—è—á—ñ –º–∞–∫—Ä–æ—Å–∏ –º–∞—é—Ç—å –Ω–∏–∂–Ω—ñ–π–í–µ—Ä–±–ª—é–¥—è—á–∏–π–†–µ–≥—ñ—Å—Ç—Ä, —è–∫ –Ω–∞–∑–≤–∏ –∑–º—ñ–Ω–Ω–∏—Ö —Ç–∞ —Ñ—É–Ω–∫—Ü—ñ–π.

[–í–µ—Ä—Ö–Ω—ñ–π–í–µ—Ä–±–ª—é–¥—è—á–∏–π–†–µ–≥—ñ—Å—Ç—Ä]: https://uk.wikipedia.org/wiki/–í–µ—Ä–±–ª—é–¥—è—á–∏–π_—Ä–µ–≥—ñ—Å—Ç—Ä

> **–ü—Ä–∏–º—ñ—Ç–∫–∞**:
>
> –ú–∞–∫—Ä–æ—Å–∏ –∑–∞–≤–∂–¥–∏ –æ–≥–æ–ª–æ—à—É—é—Ç—å—Å—è –ø—É–±–ª—ñ—á–Ω–∏–º–∏ (`public`). –û—Å–∫—ñ–ª—å–∫–∏ –∫–æ–¥, —â–æ –æ–≥–æ–ª–æ—à—É—î –º–∞–∫—Ä–æ—Å, —Ç–∞ –∫–æ–¥, —â–æ –π–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î, –∑–Ω–∞—Ö–æ–¥—è—Ç—å—Å—è —É —Ä—ñ–∑–Ω–∏—Ö –º–æ–¥—É–ª—è—Ö, –Ω–µ–ø—É–±–ª—ñ—á–Ω—ñ –º–∞–∫—Ä–æ—Å–∏ –Ω–µ–º–æ–∂–ª–∏–≤–æ –∑–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ –±—É–¥—å-–¥–µ.

–û–≥–æ–ª–æ—à–µ–Ω–Ω—è –º–∞–∫—Ä–æ—Å—É –≤–∏–∑–Ω–∞—á–∞—î –π–æ–≥–æ *—Ä–æ–ª—å* ‚Äì –º—ñ—Å—Ü—è —É –≤–∏—Ö—ñ–¥–Ω–æ–º—É –∫–æ–¥—ñ, –≤ —è–∫–∏—Ö –º–æ–∂–Ω–∞ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ —Ü–µ–π –º–∞–∫—Ä–æ—Å, —ñ —Ä—ñ–∑–Ω–æ–≤–∏–¥–∏ –∫–æ–¥—É, —â–æ –º–æ–∂–µ –∑–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ —Ü–µ–π –º–∞–∫—Ä–æ—Å. –ö–æ–∂–µ–Ω –º–∞–∫—Ä–æ—Å –º–∞—î –æ–¥–Ω—É –∞–±–æ –¥–µ–∫—ñ–ª—å–∫–∞ —Ä–æ–ª–µ–π, —è–∫—ñ –∑–∞–ø–∏—Å—É—é—Ç—å—Å—è —è–∫ —á–∞—Å—Ç–∏–Ω–∞ –∞—Ç—Ä–∏–±—É—Ç—ñ–≤ –Ω–∞ –ø–æ—á–∞—Ç–∫—É –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è –º–∞–∫—Ä–æ—Å—É. –û—Å—å —â–µ —Ç—Ä–æ—à–∫–∏ –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è –º–∞–∫—Ä–æ—Å—É `@OptionSet`, –≤–∫–ª—é—á–Ω–æ –∑ –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏, —â–æ –≤–∏–∑–Ω–∞—á–∞—é—Ç—å –π–æ–≥–æ —Ä–æ–ª—ñ:

```swift
@attached(member)
@attached(conformance)
public macro OptionSet<RawType>() =
        #externalMacro(module: "SwiftMacros", type: "OptionSetMacro")
```

–ê—Ç—Ä–∏–±—É—Ç `@attached` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —É —Ü—å–æ–º—É –æ–≥–æ–ª–æ—à–µ–Ω–Ω—ñ –¥–≤—ñ—á—ñ, –ø–æ –æ–¥–Ω–æ–º—É —Ä–∞–∑—É –Ω–∞ –∫–æ–∂–Ω—É —Ä–æ–ª—å –º–∞–∫—Ä–æ—Å—É. –£ –ø–µ—Ä—à–æ–º—É –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—ñ, `@attached(member)` –≤–∫–∞–∑—É—î, —â–æ –º–∞–∫—Ä–æ—Å –¥–æ–¥–∞—î –Ω–æ–≤—ñ —á–ª–µ–Ω–∏ –¥–æ —Ç–∏–ø—É, –Ω–∞ —è–∫–æ–º—É –π–æ–≥–æ –∑–∞—Å—Ç–æ—Å–æ–≤—É—é—Ç—å. –ú–∞–∫—Ä–æ—Å `@OptionSet` –¥–æ–¥–∞—î —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ç–æ—Ä `init(rawValue:)`, –Ω–∞—è–≤–Ω—ñ—Å—Ç—å —è–∫–æ–≥–æ –≤–∏–º–∞–≥–∞—î—Ç—å—Å—è –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º `OptionSet`, —Ç–∞–∫ —Å–∞–º–æ —è–∫ —ñ –¥–æ–¥–∞—Ç–∫–æ–≤—ñ —á–ª–µ–Ω–∏. –î—Ä—É–≥–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è ‚Äì `@attached(conformance)` ‚Äì –≤–∫–∞–∑—É—î, —â–æ `@OptionSet` –¥–æ–¥–∞—î –æ–¥–Ω–µ –∞–±–æ –¥–µ–∫—ñ–ª—å–∫–∞ –ø—ñ–¥–ø–æ—Ä—è–¥–∫—É–≤–∞–Ω—å –ø—Ä–æ—Ç–æ–∫–æ–ª—É. –ú–∞–∫—Ä–æ—Å `@OptionSet` —Ä–æ–∑—à–∏—Ä—é—î —Ç–∏–ø, –¥–æ —è–∫–æ–≥–æ –≤—ñ–Ω –∑–∞—Å—Ç–æ—Å–æ–≤—É—î—Ç—å—Å—è, –¥–æ–¥–∞—é—á–∏ –¥–æ –Ω—å–æ–≥–æ –ø—ñ–¥–ø–æ—Ä—è–¥–∫—É–≤–∞–Ω–Ω—è –ø—Ä–æ—Ç–æ–∫–æ–ª—É `OptionSet`.

–î–ª—è –æ–∫—Ä–µ–º–æ —Å—Ç–æ—è—á–æ–≥–æ –º–∞–∫—Ä–æ—Å—É, —Å–ª—ñ–¥ –ø–∏—Å–∞—Ç–∏ –∞—Ç—Ä–∏–±—É—Ç `@freestanding`, —â–æ–± –≤–∫–∞–∑–∞—Ç–∏ –π–æ–≥–æ —Ä–æ–ª—å:

```swift
@freestanding(expression)
public macro line<T: ExpressibleByIntegerLiteral>() -> T =
        /* ... –º—ñ—Å—Ü–µ–∑–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –º–∞–∫—Ä–æ—Å–∞... */
```

–ú–∞–∫—Ä–æ—Å `#line` –≤–∏—â–µ –º–∞—î —Ä–æ–ª—å `expression`, —Ç–æ–±—Ç–æ –≤—ñ–Ω —î –≤–∏—Ä–∞–∑–æ–º. –ú–∞–∫—Ä–æ—Å–∏-–≤–∏—Ä–∞–∑–∏ –ø—Ä–æ–¥—É–∫—É—é—Ç—å –∑–Ω–∞—á–µ–Ω–Ω—è, –∞–±–æ –≤–∏–∫–æ–Ω—É—é—Ç—å –¥—ñ—ó —á–∞—Å—É –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó, –Ω–∞ –∫—à—Ç–∞–ª—Ç –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è. 

–ù–∞ –¥–æ–¥–∞—á—É –¥–æ —Ä–æ–ª—ñ –º–∞–∫—Ä–æ—Å—É, –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è –º–∞–∫—Ä–æ—Å—É –Ω–∞–¥–∞—î —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –Ω–∞–∑–≤–∏ —Å–∏–º–≤–æ–ª—ñ–≤, –∫–æ—Ç—Ä—ñ –≥–µ–Ω–µ—Ä—É—î –º–∞–∫—Ä–æ—Å. –ö–æ–ª–∏ –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è –º–∞–∫—Ä–æ—Å—É –º–∞—î —Å–ø–∏—Å–æ–∫ —ñ–º–µ–Ω, –≥–∞—Ä–∞–Ω—Ç—É—î—Ç—å—Å—è, —â–æ –≤—ñ–Ω —Å—Ç–≤–æ—Ä–∏—Ç—å –ª–∏—à–µ –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è, —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å —Ü—ñ —ñ–º–µ–Ω–∞. –¶–µ –¥–æ–ø–æ–º–∞–≥–∞—î –∑—Ä–æ–∑—É–º—ñ—Ç–∏ —Ç–∞ –∑–Ω–µ–≤–∞–¥–∏—Ç–∏ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏–π –∫–æ–¥. –û—Å—å –ø–æ–≤–Ω–µ –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è –º–∞–∫—Ä–æ—Å—É `@OptionSet`:

```swift
@attached(member, names: named(RawValue), named(rawValue), 
        named(`init`), arbitrary)
@attached(conformance)
public macro OptionSet<RawType>() =
        #externalMacro(module: "SwiftMacros", type: "OptionSetMacro")
```

–£ –æ–≥–æ–ª–æ—à–µ–Ω–Ω—ñ –≤–∏—â–µ, –∞—Ç—Ä–∏–±—É—Ç `@attached(member)` –≤–∫–ª—é—á–∞—î –∞—Ä–≥—É–º–µ–Ω—Ç–∏ –ø—ñ—Å–ª—è –º—ñ—Ç–∫–∏ `named:` –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Å–∏–º–≤–æ–ª—É, —â–æ –≥–µ–Ω–µ—Ä—É—î –º–∞–∫—Ä–æ—Å `@OptionSet`. –ú–∞–∫—Ä–æ—Å –¥–æ–¥–∞—î –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è –¥–ª—è —Å–∏–º–≤–æ–ª—ñ–≤ –∑ –Ω–∞–∑–≤–∞–º–∏ `RawValue`, `rawValue`, —Ç–∞ `init`: –æ—Å–∫—ñ–ª—å–∫–∏ —Ü—ñ —ñ–º–µ–Ω–∞ —î –≤—ñ–¥–æ–º–∏–º–∏ –Ω–∞–ø–µ—Ä–µ–¥, –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è –º–∞–∫—Ä–æ—Å—É –ø–µ—Ä–µ—á–∏—Å–ª—é—î —ó—Ö —è–≤–Ω–æ.

–û–≥–æ–ª–æ—à–µ–Ω–Ω—è –º–∞–∫—Ä–æ—Å—É —Ç–∞–∫–æ–∂ –≤–∫–ª—é—á–∞—î `arbitrary` –ø—ñ—Å–ª—è —Å–ø–∏—Å–∫—É –Ω–∞–∑–≤, —â–æ –¥–æ–∑–≤–æ–ª—è—î –º–∞–∫—Ä–æ—Å—É –≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è, —á–∏—ó –Ω–∞–∑–≤–∏ —î –Ω–µ–≤—ñ–¥–æ–º–∏–º–∏ –¥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –º–∞–∫—Ä–æ—Å—É. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –∫–æ–ª–∏ –º–∞–∫—Ä–æ—Å `@OptionSet` –∑–∞—Å—Ç–æ—Å–æ–≤—É—î—Ç—å—Å—è –¥–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ `SundaeToppings` –≤–∏—â–µ, –≤—ñ–Ω –≥–µ–Ω–µ—Ä—É—î –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ —Ç–∏–ø—É, —â–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—é—Ç—å –µ–ª–µ–º–µ–Ω—Ç–∞–º –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—è `nuts`, `cherry`, —Ç–∞ `fudge`.

–î–µ—Ç–∞–ª—å–Ω—ñ—à–µ –∑—ñ —Å–ø–∏—Å–∫–æ–º —Ä–æ–ª–µ–π –º–∞–∫—Ä–æ—Å—É –º–æ–∂–Ω–∞ –æ–∑–Ω–∞–π–æ–º–∏—Ç–∏—Å—å —É —Å–µ–∫—Ü—ñ—è—Ö [attached]({% link _book/2_language_reference/07_attributes.md %}#attached) —Ç–∞ [freestanding]({% link _book/2_language_reference/07_attributes.md %}#freestanding) —Ä–æ–∑–¥—ñ–ª—É [–ê—Ç—Ä–∏–±—É—Ç–∏]({% link _book/2_language_reference/07_attributes.md %}).

## –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –º–∞–∫—Ä–æ—Å—ñ–≤

–ö–æ–ª–∏ Swift –∑–±–∏—Ä–∞—î –∫–æ–¥, —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –º–∞–∫—Ä–æ—Å–∏, –∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä –≤–∏–∫–ª–∏–∫–∞—î —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é –º–∞–∫—Ä–æ—Å—É –¥–ª—è –π–æ–≥–æ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è.

![–î—ñ–∞–≥—Ä–∞–º–∞ —ñ–ª—é—Å—Ä—É—î —á–æ—Ç–∏—Ä–∏ –∫—Ä–æ–∫–∏ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –º–∞–∫—Ä–æ—Å—ñ–≤.  –í—Ö–æ–¥–æ–º —î –≤–∏—Ö—ñ–¥–Ω–∏–π –∫–æ–¥ Swift.  –í—ñ–Ω —Å—Ç–∞—î –¥–µ—Ä–µ–≤–æ–º, —â–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—î —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–æ–¥—É.  –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –º–∞–∫—Ä–æ—Å—É –¥–æ–¥–∞—î –≥—ñ–ª–∫–∏ –¥–æ –¥–µ—Ä–µ–≤–∞.  –†–µ–∑—É–ª—å—Ç–∞—Ç–æ–º —î –¥–æ–¥–∞—Ç–∫–æ–≤–∏–π –≤–∏—Ö—ñ–¥–Ω–∏–π –∫–æ–¥ Swift.](../../assets/macro-expansion-full@2x.png)

–ó–æ–∫—Ä–µ–º–∞, Swift —Ä–æ–∑–≥–æ—Ä—Ç–∞—î –º–∞–∫—Ä–æ—Å –Ω–∞—Å—Ç—É–ø–Ω–∏–º —Å–ø–æ—Å–æ–±–æ–º:

1. –ö–æ–º–ø—ñ–ª—è—Ç–æ—Ä —á–∏—Ç–∞—î –∫–æ–¥, —Å—Ç–≤–æ—Ä—é—é—á–∏ —Ä–µ–ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü—ñ—é —Å–∏–Ω—Ç–∞–∫—Å–∏—Å—É —É –ø–∞–º'—è—Ç—ñ. 
2. –ö–æ–º–ø—ñ–ª—è—Ç–æ—Ä –Ω–∞–¥—Å–∏–ª–∞—î —á–∞—Å—Ç–∏–Ω—É —Ä–µ–ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü—ñ—ó —Å–∏–Ω—Ç–∞–∫—Å–∏—Å—É –¥–æ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –º–∞–∫—Ä–æ—Å—É, –∫–æ—Ç—Ä–∞ —Ä–æ–∑–≥–æ—Ä—Ç–∞—î –º–∞–∫—Ä–æ—Å. 
3. –ö–æ–º–ø—ñ–ª—è—Ç–æ—Ä –∑–∞–º—ñ–Ω—è—î –≤–∏–∫–ª–∏–∫ –º–∞–∫—Ä–æ—Å—É –π–æ–≥–æ —Ä–æ–∑–≥–æ—Ä–Ω—É—Ç–æ—é —Ñ–æ—Ä–º–æ—é.
4. –ö–æ–º–ø—ñ–ª—è—Ç–æ—Ä –ø—Ä–æ–¥–æ–≤–∂—É—î –∑–±—ñ—Ä–∫—É, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ —Ä–æ–∑–≥–æ—Ä–Ω—É—Ç–∏–π –≤–∏—Ö—ñ–¥–Ω–∏–π –∫–æ–¥.

–©–æ–± –ø—Ä–æ–π—Ç–∏—Å—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–º–∏ –∫—Ä–æ–∫–∞–º–∏, —Ä–æ–∑–≥–ª—è–Ω–µ–º–æ –Ω–∞—Å—Ç—É–ø–Ω–µ:

```swift
let magicNumber = #fourCharacterCode("ABCD")
```

–ú–∞–∫—Ä–æ—Å `#fourCharacterCode` –ø—Ä–∏–π–º–∞—î —Ä—è–¥–æ–∫ –¥–æ–≤–∂–∏–Ω–æ—é —É —á–æ—Ç–∏—Ä–∏ —Å–∏–º–≤–æ–ª–∏ —Ç–∞ –ø–æ–≤–µ—Ä—Ç–∞—î –±–µ–∑–∑–Ω–∞–∫–æ–≤–µ 32-–±—ñ—Ç–Ω–µ —Ü—ñ–ª–µ, —â–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–Ω–∞—á–µ–Ω–Ω—è–º ASCII —É —Ä—è–¥–∫—É, –ø–æ—î–¥–Ω–∞–Ω–∏—Ö —Ä–∞–∑–æ–º. –î–µ—è–∫—ñ —Ñ–∞–π–ª–æ–≤—ñ —Ñ–æ—Ä–º–∞—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å —Ü—ñ–ª—ñ —á–∏—Å–ª–∞ –Ω–∞ –∫—à—Ç–∞–ª—Ç —Ü—å–æ–≥–æ –¥–ª—è —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –¥–∞–Ω–∏—Ö, –æ—Å–∫—ñ–ª—å–∫–∏ –≤–æ–Ω–∏ —î –∫–æ–º–ø–∞–∫—Ç–Ω—ñ—à–∏–º–∏, –∞–ª–µ —ó—Ö –≤—Å–µ —â–µ –º–æ–∂–Ω–∞ –ø—Ä–æ—á–∏—Ç–∞—Ç–∏ —É –¥–µ–±–∞–≥–µ—Ä—ñ. –†–æ–∑–¥—ñ–ª [–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –º–∞–∫—Ä–æ—Å—ñ–≤][] –Ω–∏–∂—á–µ –ø–æ—è—Å–Ω—é—î, —è–∫ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Ü–µ–π –º–∞–∫—Ä–æ—Å. 

[–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –º–∞–∫—Ä–æ—Å—ñ–≤]: {% link _book/1_language_guide/16_6_macros.md %}#–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è-–º–∞–∫—Ä–æ—Å—ñ–≤

–©–æ–± —Ä–æ–∑–≥–æ—Ä–Ω—É—Ç–∏ –º–∞–∫—Ä–æ—Å —É –∫–æ–¥—ñ –≤–∏—â–µ, –∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä —á–∏—Ç–∞—î —Ñ–∞–π–ª Swift —Ç–∞ —Å—Ç–≤–æ—Ä—é—î —Ä–µ–ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü—ñ—é —Ü—å–æ–≥–æ –∫–æ–¥—É —É –ø–∞–º'—è—Ç—ñ, –≤—ñ–¥–æ–º—É —è–∫ [–∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–Ω–µ –¥–µ—Ä–µ–≤–æ][], –∞–±–æ –ê–°–î. –ê–°–î —Ä–æ–±–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–æ–¥—É —è–≤–Ω–æ—é, —â–æ –¥–æ–∑–≤–æ–ª—è—î –ø—Ä–æ—Å—Ç—ñ—à–µ –ø–∏—Å–∞—Ç–∏ –∫–æ–¥, —â–æ –≤–∑–∞—î–º–æ–¥—ñ—î –∑ —Ü—ñ—î—é —Å—Ç—Ä—É–∫—Ç—É—Ä–æ—é ‚Äì –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∫–æ–¥ –∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä–∞ –∞–±–æ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –º–∞–∫—Ä–æ—Å—É. –û—Å—å —Ä–µ–ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü—ñ—è –ê–°–î –¥–ª—è –∫–æ–¥—É –≤–∏—â–µ, —Ç—Ä–æ—à–∫–∏ —Å–ø—Ä–æ—â–µ–Ω–∞ –∑–∞ –∫–æ—à—Ç –æ–ø—É—Å–∫–∞–Ω–Ω—è –∑–∞–π–≤–∏—Ö –¥–µ—Ç–∞–ª–µ–π. 

[–∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–Ω–µ –¥–µ—Ä–µ–≤–æ]: https://uk.wikipedia.org/wiki/–ê–±—Å—Ç—Ä–∞–∫—Ç–Ω–µ_—Å–∏–Ω—Ç–∞–∫—Å–∏—á–Ω–µ_–¥–µ—Ä–µ–≤–æ

![–î—ñ–∞–≥—Ä–∞–º–∞, —â–æ –∑–æ–±—Ä–∞–∂—É—î –¥–µ—Ä–µ–≤–æ, —ñ–∑ –∫–æ—Ä–µ–Ω–µ–≤–∏–º –µ–ª–µ–º–µ–Ω—Ç–æ–º constant.  –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞ –º–∞—î –Ω–∞–∑–≤—É magic number, —Ç–∞ –∑–Ω–∞—á–µ–Ω–Ω—è.  –ó–Ω–∞—á–µ–Ω–Ω—è–º –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∏ —î –≤–∏–∫–ª–∏–∫ –º–∞–∫—Ä–æ—Å—É.  –í–∏–∫–ª–∏–∫ –º–∞–∫—Ä–æ—Å—É –º–∞—î –Ω–∞–∑–≤—É, fourCharacterCode, —Ç–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–∏.  –Ñ–¥–∏–Ω–∏–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º —î —Ä—è–¥–∫–æ–≤–∏–π –ª—ñ—Ç–µ—Ä–∞–ª, ABCD.](../../assets/macro-ast-original@2x.png)

–î—ñ–∞–≥—Ä–∞–º–∞ –≤–∏—â–µ —ñ–ª—é—Å—Ç—Ä—É—î, —è–∫ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ü—å–æ–≥–æ –∫–æ–¥—É –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—î—Ç—å—Å—è —É –ø–∞–º'—è—Ç—ñ. –ö–æ–∂–µ–Ω –µ–ª–µ–º–µ–Ω—Ç –ê–°–î –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î —á–∞—Å—Ç–∏–Ω—ñ –≤–∏—Ö—ñ–¥–Ω–æ–≥–æ –∫–æ–¥—É. –ï–ª–µ–º–µ–Ω—Ç –ê–°–î "Constant declaration" –º—ñ—Å—Ç–∏—Ç—å –¥–≤–∞ –¥–æ—á—ñ—Ä–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏, –∫–æ—Ç—Ä—ñ —Ä–µ–ø—Ä–µ–∑–µ–Ω—Ç—É—é—Ç—å –¥–≤—ñ —á–∞—Å—Ç–∏–Ω–∏ –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∏: —ó—ó –Ω–∞–∑–≤—É —Ç–∞ —ó—ó –∑–Ω–∞—á–µ–Ω–Ω—è. –ï–ª–µ–º–µ–Ω—Ç "Macro call" –º–∞—î –¥–≤–∞ –¥–æ—á—ñ—Ä–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏, —â–æ —Ä–µ–ø—Ä–µ–∑–µ–Ω—Ç—É—é—Ç—å –Ω–∞–∑–≤—É –º–∞–∫—Ä–æ—Å—É —Ç–∞ —Å–ø–∏—Å–æ–∫ –∞—Ä–≥—É–º–µ–Ω—Ç—ñ–≤, —â–æ –ø–µ—Ä–µ–¥–∞—é—Ç—å—Å—è –¥–æ –º–∞–∫—Ä–æ—Å—É.

–£ —Ö–æ–¥—ñ –ø–æ–±—É–¥–æ–≤–∏ –ê–°–î, –∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä –ø–µ—Ä–µ–≤—ñ—Ä—è—î, —â–æ –≤–∏—Ö—ñ–¥–Ω–∏–π –∫–æ–¥ —î –∫–æ—Ä–µ–∫—Ç–Ω–∏–º –∫–æ–¥–æ–º –Ω–∞ Swift. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, `#fourCharacterCode` –ø—Ä–∏–π–º–∞—î —î–¥–∏–Ω–∏–π –∞—Ä–≥—É–º–µ–Ω—Ç, —â–æ –º–∞—î –±—É—Ç–∏ —Ä—è–¥–∫–æ–º. –ü—Ä–∏ —Å–ø—Ä–æ–±—ñ –ø–µ—Ä–µ–¥–∞—Ç–∏ —Ü—ñ–ª–æ—á–∏—Å–µ–ª—å–Ω–∏–π –∞—Ä–≥—É–º–µ–Ω—Ç, –∞–±–æ —è–∫—â–æ –∑–∞–±—É—Ç–∏ –ø–æ—Å—Ç–∞–≤–∏—Ç–∏ –ª–∞–ø–∫–∏ (`"`) –Ω–∞–ø—Ä–∏–∫—ñ–Ω—Ü—ñ —Ä—è–¥–∫–æ–≤–æ–≥–æ –ª—ñ—Ç–µ—Ä–∞–ª–∞, –º–∏ –æ—Ç—Ä–∏–º–∞—î–º–æ –ø–æ–º–∏–ª–∫—É –Ω–∞ —Ü—å–æ–º—É –µ—Ç–∞–ø—ñ –ø—Ä–æ—Ü–µ—Å—É –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó.

–ö–æ–º–ø—ñ–ª—è—Ç–æ—Ä –∑–Ω–∞—Ö–æ–¥–∏—Ç—å –º—ñ—Å—Ü—è —É –∫–æ–¥—ñ, –¥–µ –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è –º–∞–∫—Ä–æ—Å, —ñ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î –∑–æ–≤–Ω—ñ—à–Ω—ñ–π –º–æ–¥—É–ª—å, —É —è–∫–æ–º—É —Ä–µ–∞–ª—ñ–∑–æ–≤—É—î—Ç—å—Å—è —Ü–µ–π –º–∞–∫—Ä–æ—Å. –î–ª—è –∫–æ–∂–Ω–æ–≥–æ –≤–∏–∫–ª–∏–∫—É –º–∞–∫—Ä–æ—Å—É, –∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä –ø–µ—Ä–µ–¥–∞—î —á–∞—Å—Ç–∏–Ω—É –ê–°–î –¥–æ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó —Ü—å–æ–≥–æ –º–∞–∫—Ä–æ—Å—É. –û—Å—å —Ä–µ–ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü—ñ—è —Ü—ñ—î—ó —á–∞—Å—Ç–∏–Ω–∏ –ê–°–î:

![–î—ñ–∞–≥—Ä–∞–º–∞, —â–æ –∑–æ–±—Ä–∞–∂—É—î –¥–µ—Ä–µ–≤–æ, —ñ–∑ –≤–∏–∫–ª–∏–∫–æ–º –º–∞–∫—Ä–æ—Å—É —è–∫ –∫–æ—Ä–µ–Ω–µ–≤–∏–π –µ–ª–µ–º–µ–Ω—Ç.  –í–∏–∫–ª–∏–∫ –º–∞–∫—Ä–æ—Å—É –º–∞—î –Ω–∞–∑–≤—É, fourCharacterCode, —Ç–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–∏. –ê—Ä–≥—É–º–µ–Ω—Ç–æ–º —î —Ä—è–¥–∫–æ–≤–∏–π –ª—ñ—Ç–µ—Ä–∞–ª, ABCD](../../assets/macro-ast-input@2x.png)

–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –º–∞–∫—Ä–æ—Å—É `#fourCharacterCode` –≤–∏—á–∏—Ç—É—î —Ü—é —á–∞—Å—Ç–∏–Ω—É –ê–°–î —è–∫ —Å–≤—ñ–π –≤—Ö—ñ–¥ –ø—Ä–∏ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—ñ –º–∞–∫—Ä–æ—Å—É. –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –º–∞–∫—Ä–æ—Å—É –æ–ø—Ä–∞—Ü—å–æ–≤—É—î –ª–∏—à–µ —á–∞—Å—Ç–∏–Ω—É –ê–°–î, –∫–æ—Ç—Ä—É –æ—Ç—Ä–∏–º—É—î –Ω–∞ –≤—Ö–æ–¥—ñ, —â–æ –æ–∑–Ω–∞—á–∞—î, —â–æ –º–∞–∫—Ä–æ—Å –∑–∞–≤–∂–¥–∏ —Ä–æ–∑–≥–æ—Ä—Ç–∞—î—Ç—å—Å—è –≤ –æ–¥–∏–Ω —ñ —Ç–æ–π –∂–µ —Å–ø–æ—Å—ñ–± –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ç–æ–≥–æ, —è–∫–∏–π –∫–æ–¥ –π–¥–µ –ø–µ—Ä–µ–¥ –Ω–∏–º –∞–±–æ –ø—ñ—Å–ª—è –Ω—å–æ–≥–æ. –¶–µ –æ–±–º–µ–∂–µ–Ω–Ω—è –¥–æ–ø–æ–º–∞–≥–∞—î –∑—Ä–æ–±–∏—Ç–∏ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –º–∞–∫—Ä–æ—Å—É –ª–µ–≥—à–∏–º –¥–ª—è —Ä–æ–∑—É–º—ñ–Ω–Ω—è, —ñ –¥–æ–ø–æ–º–∞–≥–∞—î –≤–∞—à–æ–º—É –∫–æ–¥—É –∑–±–∏—Ä–∞—Ç–∏—Å—è —à–≤–∏–¥—à–µ, –æ—Å–∫—ñ–ª—å–∫–∏ Swift –º–æ–∂–µ —É–Ω–∏–∫–Ω—É—Ç–∏ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –º–∞–∫—Ä–æ—Å—É, –∫–æ—Ç—Ä–∏–π –Ω–µ –∑–º—ñ–Ω–∏–≤—Å—è. 

<!-- TODO TR: Confirm -->
Swift –¥–æ–ø–æ–º–∞–≥–∞—î –∞–≤—Ç–æ—Ä–∞–º –º–∞–∫—Ä–æ—Å—É —É–Ω–∏–∫–Ω—É—Ç–∏ –≤–∏–ø–∞–¥–∫–æ–≤–æ–≥–æ –≤–∏—á–∏—Ç—É–≤–∞–Ω–Ω—è —ñ–Ω—à–∏—Ö –≤—Ö—ñ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö, –æ–±–º–µ–∂—É—é—á–∏ –∫–æ–¥, —â–æ —Ä–µ–∞–ª—ñ–∑–æ–≤—É—î –º–∞–∫—Ä–æ—Å. 

 - –ê–°–î, —â–æ –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è –¥–æ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –º–∞–∫—Ä–æ—Å—É, –º—ñ—Å—Ç–∏—Ç—å –ª–∏—à–µ —Ç—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ –ê–°–î, —â–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç—å –ª–∏—à–µ —Å–∞–º –º–∞–∫—Ä–æ—Å, –∞–ª–µ –Ω–µ —Å—Ç–æ—Å—É—é—Ç—å—Å—è –∂–æ–¥–Ω–æ–≥–æ –∫–æ–¥—É –ø–µ—Ä–µ–¥ –Ω–∏–º –∞–±–æ –ø—ñ—Å–ª—è –Ω—å–æ–≥–æ. 
 - –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –º–∞–∫—Ä–æ—Å—É –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è —É —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ –ø—ñ—Å–æ—á–Ω–∏—Ü—ñ, —â–æ –∑–∞–ø–æ–±—ñ–≥–∞—î –¥–æ—Å—Ç—É–ø—É –¥–æ —Ñ–∞–π–ª–æ–≤–æ—ó —Å–∏—Å—Ç–µ–º–∏ —Ç–∞ –º–µ—Ä–µ–∂—ñ. 

–ù–∞ –¥–æ–¥–∞—á—É –¥–æ —Ü–∏—Ö –º–µ—Ö–∞–Ω—ñ–∑–º—ñ–≤ –±–µ–∑–ø–µ–∫–∏, –∞–≤—Ç–æ—Ä –º–∞–∫—Ä–æ—Å—É —î –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–∏–º –∑–∞ —Ç–µ, —â–æ–± –Ω–µ –≤–∏—á–∏—Ç—É–≤–∞—Ç–∏ –∞–±–æ –º–æ–¥–∏—Ñ—ñ–∫—É–≤–∞—Ç–∏ –±—É–¥—å-—â–æ –∑–∞ –º–µ–∂–∞–º–∏ –≤—Ö–æ–¥—É –º–∞–∫—Ä–æ—Å—É. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –º–∞–∫—Ä–æ—Å—É –Ω–µ –ø–æ–≤–∏–Ω–Ω–æ –∑–∞–ª–µ–∂–∞—Ç–∏ –≤—ñ–¥ –ø–æ—Ç–æ—á–Ω–æ–≥–æ —á–∞—Å—É –¥–æ–±–∏. 

–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –º–∞–∫—Ä–æ—Å—É `#fourCharacterCode` –≥–µ–Ω–µ—Ä—É—î –Ω–æ–≤–µ –ê–°–î, –∫–æ—Ç—Ä–µ –º—ñ—Å—Ç–∏—Ç—å —Ä–æ–∑–≥–æ—Ä–Ω—É—Ç–∏–π –∫–æ–¥. –û—Å—å —â–æ —Ü–µ–π –∫–æ–¥ –ø–æ–≤–µ—Ä—Ç–∞—î –¥–æ –∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä–∞:

![–î—ñ–∞–≥—Ä–∞–º–∞, —â–æ –∑–æ–±—Ä–∞–∂–∞—î –¥–µ—Ä–µ–≤–æ –∑ —î–¥–∏–Ω–∏–º –µ–ª–µ–º–µ–Ω—Ç–æ–º, —â–æ —î —Ü—ñ–ª–æ—á–∏—Å–µ–ª—å–Ω–∏–º –ª—ñ—Ç–µ—Ä–∞–ª–æ–º 1145258561.](../../assets/macro-ast-output@2x.png)

–ö–æ–ª–∏ –∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä –æ—Ç—Ä–∏–º—É—î —Ü–µ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è, –≤—ñ–Ω –∑–∞–º—ñ–Ω—è—î –µ–ª–µ–º–µ–Ω—Ç –ê–°–î, —â–æ –º—ñ—Å—Ç–∏—Ç—å –≤–∏–∫–ª–∏–∫ –º–∞–∫—Ä–æ—Å—É, –µ–ª–µ–º–µ–Ω—Ç–æ–º, —â–æ –º—ñ—Å—Ç–∏—Ç—å —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –º–∞–∫—Ä–æ—Å—É. –ü—ñ—Å–ª—è —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –º–∞–∫—Ä–æ—Å—É, –∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä –∑–Ω–æ–≤—É –ø–µ—Ä–µ–≤—ñ—Ä—è—î –∫–æ–¥ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è, —â–æ–± —É–ø–µ–≤–Ω–∏—Ç–∏—Å—å, —â–æ –ø—Ä–æ–≥—Ä–∞–º–∞ –≤—Å–µ —â–µ —î —Å–∏–Ω—Ç–∞–∫—Å–∏—á–Ω–æ –∫–æ—Ä–µ–∫—Ç–Ω–∏–º –∫–æ–¥–æ–º –Ω–∞ Swift, —ñ —â–æ –≤—Å—ñ —Ç–∏–ø–∏ —î –∫–æ—Ä–µ–∫—Ç–Ω–∏–º–∏. –¶–µ –ø—Ä–æ–¥—É–∫—É—î —Ñ—ñ–Ω–∞–ª—å–Ω–µ –ê–°–î, —â–æ —Ç–µ–ø–µ—Ä –º–æ–∂–µ –±—É—Ç–∏ —Å–∫–æ–º–ø—ñ–ª—å–æ–≤–∞–Ω–æ, —è–∫ –∑–∞–∑–≤–∏—á–∞–π:

![–î—ñ–∞–≥—Ä–∞–º–∞, —â–æ –∑–æ–±—Ä–∞–∂–∞—î –¥–µ—Ä–µ–≤–æ –∑ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–æ—é —É –∫–æ—Ä–µ–Ω—ñ.  –ö–æ–Ω—Å—Ç–∞–Ω—Ç–∞ –º–∞—î –Ω–∞–∑–≤—É magic number, —Ç–∞ –∑–Ω–∞—á–µ–Ω–Ω—è.  –ó–Ω–∞—á–µ–Ω–Ω—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∏ —î —Ü—ñ–ª–æ—á–∏—Å–µ–ª—å–Ω–∏–º –ª—ñ—Ç–µ—Ä–∞–ª–æ–º –∑—ñ –∑–Ω–∞—á–µ–Ω–Ω—è–º 1145258561](../../assets/macro-ast-result@2x.png)

–¶–µ –ê–°–î –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∫–æ–¥—É –Ω–∞ –∫—à—Ç–∞–ª—Ç —Ü—å–æ–≥–æ: 

```swift
let magicNumber = 1145258561
```

–£ —Ü—å–æ–º—É –ø—Ä–∏–∫–ª–∞–¥—ñ, –≤–∏—Ö—ñ–¥–Ω–∏–π –∫–æ–¥ –Ω–∞ –ø–æ—á–∞—Ç–∫—É –º—ñ—Å—Ç–∏—Ç—å –ª–∏—à–µ –æ–¥–∏–Ω –º–∞–∫—Ä–æ—Å, –∞–ª–µ —É —Ä–µ–∞–ª—å–Ω—ñ–π –ø—Ä–æ–≥—Ä–∞–º—ñ –º–æ–∂–µ –±—É—Ç–∏ –¥–µ–∫—ñ–ª—å–∫–∞ –µ–∫–∑–µ–º–ø–ª—è—Ä—ñ–≤ –æ–¥–Ω–æ–≥–æ –º–∞–∫—Ä–æ—Å—É, —ñ –¥–µ–∫—ñ–ª—å–∫–∞ –≤–∏–∫–ª–∏–∫—ñ–≤ –¥–æ —Ä—ñ–∑–Ω–∏—Ö –º–∞–∫—Ä–æ—Å—ñ–≤. –ö–æ–º–ø—ñ–ª—è—Ç–æ—Ä —Ä–æ–∑–≥–æ—Ä—Ç–∞—î –º–∞–∫—Ä–æ—Å–∏ –ø–æ –æ–¥–Ω–æ–º—É –∑–∞ —Ä–∞–∑. 

–Ø–∫—â–æ –æ–¥–∏–Ω –º–∞–∫—Ä–æ—Å –∑'—è–≤–ª—è—î—Ç—å—Å—è –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ —ñ–Ω—à–æ–≥–æ, –∑–æ–≤–Ω—ñ—à–Ω—ñ–π –º–∞–∫—Ä–æ—Å —Ä–æ–∑–≥–æ—Ä–Ω–µ—Ç—å—Å—è –ø–µ—Ä—à–∏–º ‚Äì —Ü–µ –¥–æ–∑–≤–æ–ª—è—î –∑–æ–≤–Ω—ñ—à–Ω—å–æ–º—É –º–∞–∫—Ä–æ—Å—É –∑–º—ñ–Ω–∏—Ç–∏ –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ–π –º–∞–∫—Ä–æ—Å –¥–æ —Ç–æ–≥–æ, —è–∫ –≤—ñ–Ω —Ä–æ–∑–≥–æ—Ä–Ω–µ—Ç—å—Å—è. 

<!-- OUTLINE

- TR: Is there any limit to nesting?
  TR: Is it valid to nest like this -- if so, anything to note about it?

  ```
  let something = #someMacro {
      struct A { }
      @someMacro struct B { }
  }
  ```

- Macro recursion is limited.
  One macro can call another,
  but a given macro can't directly or indirectly call itself.
  The result of macro expansion can include other macros,
  but it can't include a macro that uses this macro in its expansion
  or declare a new macro.
  (TR: Likely need to iterate on details here)
-->

## –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –º–∞–∫—Ä–æ—Å—ñ–≤

–©–æ–± —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –º–∞–∫—Ä–æ—Å, —Å–ª—ñ–¥ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –¥–≤–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏: —Ç–∏–ø, —â–æ –≤–∏–∫–æ–Ω—É—î —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –º–∞–∫—Ä–æ—Å—É, —Ç–∞ –±—ñ–±–ª—ñ–æ—Ç–µ–∫—É, —â–æ –æ–≥–æ–ª–æ—à—É—î –º–∞–∫—Ä–æ—Å —Ç–∞ –Ω–∞–¥–∞—î –π–æ–≥–æ —è–∫ —Å–≤—ñ–π API. –¶—ñ —á–∞—Å—Ç–∏–Ω–∏ –∑–±–∏—Ä–∞—é—Ç—å—Å—è –æ–∫—Ä–µ–º–æ –≤—ñ–¥ –∫–æ–¥—É, —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –º–∞–∫—Ä–æ—Å, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –≤–∏ –ø—Ä–∞—Ü—é—î—Ç–µ –Ω–∞–¥ –º–∞–∫—Ä–æ—Å–æ–º —Ç–∞ –π–æ–≥–æ –∫–ª—ñ—î–Ω—Ç–∞–º–∏ —Ä–∞–∑–æ–º, —Ç–æ–º—É —â–æ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –º–∞–∫—Ä–æ—Å—É –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è —è–∫ —á–∞—Å—Ç–∏–Ω–∞ –∑–±—ñ—Ä–∫–∏ –∫–ª—ñ—î–Ω—Ç—ñ–≤ –º–∞–∫—Ä–æ—Å—É. 

–©–æ–± —Å—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–∏–π –º–∞–∫—Ä–æ—Å –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é Swift Package Manager, —Å–ª—ñ–¥ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –∫–æ–º–∞–Ω–¥—É `swift package init --type macro`: —Ü–µ —Å—Ç–≤–æ—Ä–∏—Ç—å –¥–µ–∫—ñ–ª—å–∫–∞ —Ñ–∞–π–ª—ñ–≤, –≤–∫–ª—é—á–Ω–æ –∑ —à–∞–±–ª–æ–Ω–æ–º –¥–ª—è —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó —Ç–∞ –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è –º–∞–∫—Ä–æ—Å—É.

–©–æ–± –¥–æ–¥–∞—Ç–∏ –º–∞–∫—Ä–æ—Å –¥–æ –Ω–∞—è–≤–Ω–æ–≥–æ –ø—Ä–æ—î–∫—Ç—É, —Å–ª—ñ–¥ –¥–æ–¥–∞—Ç–∏ —Ç–∞—Ä–≥–µ—Ç –∑ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—î—é –º–∞–∫—Ä–æ—Å—É, —Ç–∞ —Ç–∞—Ä–≥–µ—Ç –¥–ª—è –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ –º–∞–∫—Ä–æ—Å—É. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –º–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏ —â–æ—Å—å —Å—Ö–æ–∂–µ –Ω–∞ —Ü–µ–π –ø—Ä–∏–∫–ª–∞–¥ –∫–æ–¥—É –¥–æ –≤–∞—à–æ–≥–æ —Ñ–∞–π–ª—É `Package.swift`, –∑–º—ñ–Ω—é—é—á–∏ –Ω–∞–∑–≤–∏, —â–æ–± –≤–æ–Ω–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª–∏ –≤–∞—à–æ–º—É –ø—Ä–æ—î–∫—Ç—É:

```swift
targets: [
    // –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –º–∞–∫—Ä–æ—Å—É, —â–æ –≤–∏–∫–æ–Ω—É—î —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—ó –≤–∏—Ö—ñ–¥–Ω–æ–≥–æ –∫–æ–¥—É.
    .macro(
        name: "MyProjectMacros",
        dependencies: [
            .product(name: "SwiftSyntaxMacros", package: "swift-syntax"),
            .product(name: "SwiftCompilerPlugin", package: "swift-syntax")
        ]
    ),

    // –ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∞, —â–æ –Ω–∞–¥–∞—î –º–∞–∫—Ä–æ—Å —è–∫ —á–∞—Å—Ç–∏–Ω—É —Å–≤–æ–≥–æ –ø—É–±–ª—ñ—á–Ω–æ–≥–æ API.
    .target(name: "MyProject", dependencies: ["MyProjectMacros"]),
]
```

–ö–æ–¥ –≤–∏—â–µ –≤–∏–∑–Ω–∞—á–∞—î –¥–≤–∞ —Ç–∞—Ä–≥–µ—Ç–∏: `MyProjectMacros`, –∫–æ—Ç—Ä–∏–π –º—ñ—Å—Ç–∏—Ç—å —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é –º–∞–∫—Ä–æ—Å—É, —Ç–∞ `MyProject`, —â–æ —Ä–æ–±–∏—Ç—å —Ü–µ–π –º–∞–∫—Ä–æ—Å –¥–æ—Å—Ç—É–ø–Ω–∏–º.

–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –º–∞–∫—Ä–æ—Å—É –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –º–æ–¥—É–ª—å [`SwiftSyntax`][] –¥–ª—è –≤–∑–∞—î–º–æ–¥—ñ—ó –∑ –∫–æ–¥–æ–º Swift —É —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–∏–π —Å–ø–æ—Å—ñ–±, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –ê–°–î. –Ø–∫—â–æ –≤–∏ —Å—Ç–≤–æ—Ä–∏–ª–∏ –Ω–æ–≤–∏–π –ø–∞–∫–µ—Ç –∑ –º–∞–∫—Ä–æ—Å–æ–º –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é Swift Package Manager, –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏–π —Ñ–∞–π–ª `Package.swift` –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∫–ª—é—á–∞—î –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å –Ω–∞ `SwiftSyntax`. –Ø–∫—â–æ –≤–∏ –¥–æ–¥–∞—î—Ç–µ –º–∞–∫—Ä–æ—Å –¥–æ –Ω–∞—è–≤–Ω–æ–≥–æ –ø—Ä–æ—î–∫—Ç—É, —Å–ª—ñ–¥ –¥–æ–¥–∞—Ç–∏ –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å –Ω–∞ `SwiftSyntax` –¥–æ –≤–∞—à–æ–≥–æ —Ñ–∞–π–ª—É `Package.swift`:

[`SwiftSyntax`]: http://github.com/apple/swift-syntax/

```swift
dependencies: [
    .package(url: "https://github.com/apple/swift-syntax.git", from: "some-tag"),
],
```

–ó–∞–º—ñ–Ω—ñ—Ç—å `some-tag` —É –∫–æ–¥—ñ –≤–∏—â–µ –Ω–∞ —Ç–µ–≥ Git –¥–ª—è –≤–µ—Ä—Å—ñ—ó `SwiftSyntax`, –∑ —è–∫–æ—é –≤–∏ —Ö–æ—á–µ—Ç–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏. 

–í –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤—ñ–¥ —Ä–æ–ª—ñ –≤–∞—à–æ–≥–æ –º–∞–∫—Ä–æ—Å—É, —Å–ª—ñ–¥ –æ–±—Ä–∞—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–π –ø—Ä–æ—Ç–æ–∫–æ–ª –∑ –º–æ–¥—É–ª—è `SwiftSystem`, –¥–æ –∫–æ—Ç—Ä–æ–≥–æ –º–∞—î –±—É—Ç–∏ –ø—ñ–¥–ø–æ—Ä—è–¥–∫–æ–≤–∞–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –º–∞–∫—Ä–æ—Å—É. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, —Ä–æ–∑–≥–ª—è–Ω–µ–º–æ –º–∞–∫—Ä–æ—Å `#fourCharacterCode` —ñ–∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ —Ä–æ–∑–¥—ñ–ª—É. –û—Å—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, —â–æ —Ä–µ–∞–ª—ñ–∑–æ–≤—É—î —Ü–µ–π –º–∞–∫—Ä–æ—Å:

```swift
public struct FourCharacterCode: ExpressionMacro {
    public static func expansion(
        of node: some FreestandingMacroExpansionSyntax,
        in context: some MacroExpansionContext
    ) throws -> ExprSyntax {
        guard let argument = node.argumentList.first?.expression,
              let segments = argument.as(StringLiteralExprSyntax.self)?.segments,
              segments.count == 1,
              case .stringSegment(let literalSegment)? = segments.first
        else {
            throw CustomError.message("–ù–µ–æ–±—Ö—ñ–¥–Ω–∏–π —Å—Ç–∞—Ç–∏—á–Ω–∏–π —Ä—è–¥–æ–∫")
        }

        let string = literalSegment.content.text
        guard let result = fourCharacterCode(for: string) else {
            throw CustomError.message("–ù–µ–∫–æ—Ä–µ–∫—Ç–Ω–∏–π —á–æ—Ç–∏—Ä—å–æ—Ö—Å–∏–º–≤–æ–ª—å–Ω–∏–π –∫–æ–¥")
        }

        return "\(raw: result)"
    }
}

private func fourCharacterCode(for characters: String) -> UInt32? {
    guard characters.count == 4 else { return nil }

    var result: UInt32 = 0
    for character in characters {
        result = result << 8
        guard let asciiValue = character.asciiValue else { return nil }
        result += UInt32(asciiValue)
    }
    return result.bigEndian
}
enum CustomError: Error { case message(String) }
```

–ú–∞–∫—Ä–æ—Å `#fourCharacterCode` —î –æ–∫—Ä–µ–º–æ —Å—Ç–æ—è—á–∏–º –º–∞–∫—Ä–æ—Å–æ–º, —â–æ –ø—Ä–æ–¥—É–∫—É—î –≤–∏—Ä–∞–∑ (expression), —Ç–æ–º—É —Ç–∏–ø `FourCharacterCode`, —â–æ –π–æ–≥–æ —Ä–µ–∞–ª—ñ–∑—É—î, –ø—ñ–¥–ø–æ—Ä—è–¥–∫–æ–≤—É—î—Ç—å—Å—è –¥–æ –ø—Ä–æ—Ç–æ–∫–æ–ª—É `ExpressionMacro`. –ü—Ä–æ—Ç–æ–∫–æ–ª `ExpressionMacro` –º—ñ—Å—Ç–∏—Ç—å —î–¥–∏–Ω—É –≤–∏–º–æ–≥—É, –∞ —Å–∞–º–µ –º–µ—Ç–æ–¥ `expansion(of:in:)`, —â–æ —Ä–æ–∑–≥–æ—Ä—Ç–∞—î –ê–°–î. –ó—ñ —Å–ø–∏—Å–∫–æ–º —Ä–æ–ª–µ–π –º–∞–∫—Ä–æ—Å—ñ–≤ —Ç–∞ —ó—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª—ñ–≤ —É `SwiftSystem`, –º–æ–∂–Ω–∞ –æ–∑–Ω–∞–π–æ–º–∏—Ç–∏—Å—å —É —Å–µ–∫—Ü—ñ—è—Ö [attached]({% link _book/2_language_reference/07_attributes.md %}#attached) —Ç–∞ [freestanding]({% link _book/2_language_reference/07_attributes.md %}#freestanding) —Ä–æ–∑–¥—ñ–ª—É [–ê—Ç—Ä–∏–±—É—Ç–∏]({% link _book/2_language_reference/07_attributes.md %}).

–©–æ–± —Ä–æ–∑–≥–æ—Ä–Ω—É—Ç–∏ –º–∞–∫—Ä–æ—Å `#fourCharacterCode`, Swift –Ω–∞–¥—Å–∏–ª–∞—î –ê–°–î –¥–ª—è –∫–æ–¥—É, —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ü–µ–π –º–∞–∫—Ä–æ—Å, —â–æ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏, —â–æ –º—ñ—Å—Ç–∏—Ç—å —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é –º–∞–∫—Ä–æ—Å—É. –í—Å–µ—Ä–µ–¥–∏–Ω—ñ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏, Swift –≤–∏–∫–ª–∏–∫–∞—î –º–µ—Ç–æ–¥ `FourCharacterCode.expansion(of:in:)`, —ñ –ø–µ—Ä–µ–¥–∞—î –¥–æ –Ω—å–æ–≥–æ –ê–°–î —Ç–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç —è–∫ –∞—Ä–≥—É–º–µ–Ω—Ç. –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –º–µ—Ç–æ–¥—É `expansion(of:in:)` —Å–ø–µ—Ä—à—É —à—É–∫–∞—î —Ä—è–¥–æ–∫, —è–∫–∏–π –±—É–ª–æ –ø–µ—Ä–µ–¥–∞–Ω–æ —è–∫ –∞—Ä–≥—É–º–µ–Ω—Ç –¥–æ –º–∞–∫—Ä–æ—Å—É `#fourCharacterCode`, —Ç–∞ –≤–∏—Ä–∞—Ö–æ–≤—É—î –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–π —Ü—ñ–ª–æ—á–∏—Å–µ–ª—å–Ω–∏–π –ª—ñ—Ç–µ—Ä–∞–ª.

–£ –ø—Ä–∏–∫–ª–∞–¥—ñ –≤–∏—â–µ, –ø–µ—Ä—à–∏–π –±–ª–æ–∫ `guard` –≤–∏—Ç—è–≥—É—î —Ä—è–¥–∫–æ–≤–∏–π –ª—ñ—Ç–µ—Ä–∞–ª –∑ –ê–°–î, –ø—Ä–∏—Å–≤–æ—é—é—á–∏ —Ü–µ–π –µ–ª–µ–º–µ–Ω—Ç –ê–°–î –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ñ `literalSegment`. –î—Ä—É–≥–∏–π –±–ª–æ–∫ `guard` –≤–∏–∫–ª–∏–∫–∞—î –ø—Ä–∏–≤–∞—Ç–Ω—É —Ñ—É–Ω–∫—Ü—ñ—é `FourCharacterCode(for:)`. –û–±–∏–¥–≤—ñ —Ü—ñ –±–ª–æ–∫–∏ –≤–∏–∫–∏–¥—É—é—Ç—å –ø–æ–º–∏–ª–∫—É, —è–∫—â–æ –º–∞–∫—Ä–æ—Å –±—É–ª–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ: –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫—É —Å—Ç–∞—î –ø–æ–º–∏–ª–∫–æ—é –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó, —â–æ –≤—ñ–¥–æ–±—Ä–∞–∑–∏—Ç—å—Å—è —É –º—ñ—Å—Ü—ñ –≤–∂–∏—Ç–∫—É –ø–æ–º–∏–ª–∫–æ–≤–æ–≥–æ –∫–æ–¥—É. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, —è–∫—â–æ –≤–∏ —Å–ø—Ä–æ–±—É—î—Ç–µ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –º–∞–∫—Ä–æ—Å —è–∫ `#fourCharacterCode("AB" + "CD")`, –∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä –ø–æ–∫–∞–∂–µ –ø–æ–º–∏–ª–∫—É "–ù–µ–æ–±—Ö—ñ–¥–Ω–∏–π —Å—Ç–∞—Ç–∏—á–Ω–∏–π —Ä—è–¥–æ–∫".

–ú–µ—Ç–æ–¥ `expansion(of:in:)` –ø–æ–≤–µ—Ä—Ç–∞—î –µ–∫–∑–µ–º–ø–ª—è—Ä `ExprSyntax`, —Ç–∏–ø—É –∑ –º–æ–¥—É–ª—è `SwiftSyntax`, —â–æ —Ä–µ–ø—Ä–µ–∑–µ–Ω—Ç—É—î –≤–∏—Ä–∞–∑ —É –ê–°–î. –û—Å–∫—ñ–ª—å–∫–∏ —Ü–µ–π —Ç–∏–ø –ø—ñ–¥–ø–æ—Ä—è–¥–∫–æ–≤–∞–Ω–æ –¥–æ –ø—Ä–æ—Ç–æ–∫–æ–ª—É `StringLiteralConvertible`, —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –º–∞–∫—Ä–æ—Å—É –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ä—è–¥–∫–æ–≤–∏–π –ª—ñ—Ç–µ—Ä–∞–ª —è–∫ —Å–ø—Ä–æ—â–µ–Ω–∏–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å–≤–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É. –£—Å—ñ —Ç–∏–ø–∏ –≤ –º–æ–¥—É–ª—ñ `SwiftSyntax`, —â–æ –º–æ–∂–Ω–∞ –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏ —É —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –º–∞–∫—Ä–æ—Å—ñ–≤, —î –ø—ñ–¥–ø–æ—Ä—è–¥–∫–æ–≤–∞–Ω–∏–º–∏ –¥–æ –ø—Ä–æ—Ç–æ–∫–æ–ª—É `StringLiteralConvertible`, —Ç–æ–º—É –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ü–µ–π –ø—ñ–¥—Ö—ñ–¥ –ø—Ä–∏ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –±—É–¥—å-—è–∫–æ–≥–æ –º–∞–∫—Ä–æ—Å—É. 

## –†–æ–∑—Ä–æ–±–∫–∞ —Ç–∞ –∑–Ω–µ–≤–∞–¥–∂–µ–Ω–Ω—è –º–∞–∫—Ä–æ—Å—ñ–≤

–ú–∞–∫—Ä–æ—Å–∏ –¥—É–∂–µ –¥–æ–±—Ä–µ –ø—ñ–¥—Ö–æ–¥—è—Ç—å –¥–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏ —á–µ—Ä–µ–∑ —Ç–µ—Å—Ç–∏: –≤–æ–Ω–∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º—É—é—Ç—å –ê–°–î –≤ —ñ–Ω—à–µ –ê–°–î, –Ω–µ –∑–∞–ª–µ–∂–∞—á–∏ –≤—ñ–¥ –∂–æ–¥–Ω–æ–≥–æ –∑–æ–≤–Ω—ñ—à–Ω—å–æ–≥–æ —Å—Ç–∞–Ω—É, —ñ –±–µ–∑ –≤–Ω–µ—Å–µ–Ω–Ω—è –∑–º—ñ–Ω –¥–æ –∂–æ–¥–Ω–æ–≥–æ –∑–æ–≤–Ω—ñ—à–Ω—å–æ–≥–æ —Å—Ç–∞–Ω—É. –ö—Ä—ñ–º —Ç–æ–≥–æ, –≤–∏ –º–æ–∂–µ—Ç–µ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –µ–ª–µ–º–µ–Ω—Ç–∏ –ê–°–î –ø—Ä—è–º–æ –∑ —Ä—è–¥–∫–æ–≤–∏—Ö –ª—ñ—Ç–µ—Ä–∞–ª—ñ–≤, —â–æ —Å–ø—Ä–æ—â—É—î –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≤—Ö—ñ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö –¥–ª—è —Ç–µ—Å—Ç—É. –í–∏ —Ç–∞–∫–æ–∂ –º–æ–∂–µ—Ç–µ —á–∏—Ç–∞—Ç–∏ –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å `description` –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –ê–°–î, —â–æ–± –ø–æ—Ä—ñ–≤–Ω—é–≤–∞—Ç–∏ —Ä—è–¥–æ–∫ –∑ –æ—á—ñ–∫—É–≤–∞–Ω–∏–º –∑–Ω–∞—á–µ–Ω–Ω—è–º. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –æ—Å—å —Ç–µ—Å—Ç–∏ –¥–ª—è –º–∞–∫—Ä–æ—Å—É `#fourCharacterCode` –∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ—Ö —Ä–æ–∑–¥—ñ–ª—ñ–≤:

```swift
let source: SourceFileSyntax =
    """
    let abcd = #fourCharacterCode("ABCD")
    """

let file = BasicMacroExpansionContext.KnownSourceFile(
    moduleName: "MyModule",
    fullFilePath: "test.swift"
)

let context = BasicMacroExpansionContext(sourceFiles: [source: file])

let transformedSF = source.expand(
    macros:["fourCharacterCode": FourCC.self],
    in: context
)

let expectedDescription =
    """
    let abcd = 1145258561
    """

precondition(transformedSF.description == expectedDescription)
```

–£ –ø—Ä–∏–∫–ª–∞–¥—ñ –≤–∏—â–µ –º–∞–∫—Ä–æ—Å —Ç–µ—Å—Ç—É—î—Ç—å—Å—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –ø–µ—Ä–µ–¥—É–º–æ–≤–∏ `precondition`, –∞–ª–µ –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –Ω–∞—Ç–æ–º—ñ—Å—Ç—å –±—É–¥—å-—è–∫–∏–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è.
